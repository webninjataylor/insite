$(function(){function k(){var n=o.length,r=Math.floor(n/N),i=n-r*N,s=0;for(var u=0;u<N;u++){var a=$("<ul />").addClass("btnList").appendTo($(".mapWrapper"));if(u<N-1)for(var f=0;f<r;f++){var l=$("<li />").addClass("stateButton").html(e[s]).appendTo(a);l.attr("id",f);l.click(function(e){window.open(t[$(this).attr("id")],"_self")});s++}else for(var f=0;f<r+i;f++){var l=$("<li />").addClass("stateButton").html(e[s]).appendTo(a);s++}}M()}function L(){b=new ScaleRaphael("map",930,590),attributes={fill:"#d9d9d9",cursor:"pointer",stroke:a,"stroke-width":1,"stroke-linejoin":"round","font-family":"Verdana","font-size":"19px","font-weight":"bold"},arr=new Array;var l={};l.alabama=b.set();l.alaska=b.set();l.arizona=b.set();l.arkansas=b.set();l.california=b.set();l.colorado=b.set();l.connecticut=b.set();l.delaware=b.set();l.dc=b.set();l.florida=b.set();l.georgia=b.set();l.hawaii=b.set();l.idaho=b.set();l.illinois=b.set();l.indiana=b.set();l.iowa=b.set();l.kansas=b.set();l.kentucky=b.set();l.louisiana=b.set();l.maine=b.set();l.maryland=b.set();l.massachusetts=b.set();l.michigan=b.set();l.minnesota=b.set();l.mississippi=b.set();l.missouri=b.set();l.montana=b.set();l.nebraska=b.set();l.nevada=b.set();l.newHampshire=b.set();l.newJersey=b.set();l.newMexixo=b.set();l.newYork=b.set();l.northCarolina=b.set();l.northDakota=b.set();l.ohio=b.set();l.oklahoma=b.set();l.oregon=b.set();l.pennsylvenia=b.set();l.rhodeIsland=b.set();l.southCarolina=b.set();l.southDakota=b.set();l.tennessee=b.set();l.texas=b.set();l.utah=b.set();l.vermont=b.set();l.virginia=b.set();l.washington=b.set();l.westVirginia=b.set();l.wisconsin=b.set();l.wyoming=b.set();var c={cursor:"pointer",fill:"#fff"},h=0;for(var p in usamappaths){var v=l[p];v.attr(attributes);n[h]=="OFF"?c={cursor:"default",fill:u}:c={cursor:"pointer",fill:r[h],stroke:a,id:h};v.push(b.path(usamappaths[p].path).attr(c));v.push(b.text(usamappaths[p].textX,usamappaths[p].textY,usamappaths[p].text).attr({"font-family":"Arial, sans-serif","font-weight":"bold","font-size":"14",fill:f,cursor:"pointer","z-index":1e3}));v[0].node.id=h;v[0].toBack();v[1].toFront();v.mouseover(function(t){t.stopPropagation();var r=$(this.node).attr("id");if(n[r]!="OFF"){this!=T&&this.animate({fill:i[r]},500);$("#map").next(".point").remove();$("#map").after($("<div />").addClass("point"));$(".point").html(e[r]).css({left:S-50,top:x-70}).fadeIn()}});v.mouseout(function(e){var t=$(this.node).attr("id");if(n[t]!="OFF"){this!=T&&this.animate({fill:r[t]},500);$("#map").next(".point").remove()}});v.mouseup(function(e){var i=$(this.node).attr("id");if(n[i]!="OFF"){var u=$("#text")[0];u.scrollLeft=0;u.scrollTop=0;if(T){var a=$(T.node).attr("id");T.animate({fill:r[a]},500)}this.animate({fill:s[i]},500);T=this;d=="true"?$("#text").html(o[i]):window.open(t[i],"_self")}});h++}M()}function A(e){var t=$(window).scrollTop();if(e&&e.pageX){S=e.pageX;x=e.pageY-t}else{S=event.clientX+document.body.scrollLeft;x=event.clientY+document.body.scrollTop}S<0&&(S=0);x<0&&(x=0);$("#map").next(".point").css({left:S-50,top:x-70})}function O(){if(!E){b.changeSize(l,c,!0,!1);d=="true"?$(".mapWrapper").css({width:parseFloat(l,10)+parseFloat(v,10)+"px",height:c+"px"}):$(".mapWrapper").css({width:l+"px",height:c+"px"})}else $(".mapWrapper").css({width:l+"px",height:"auto"})}function M(){y=g.width();if(y>=960){l=h;c=l/w;O()}else if(y<960&&y>=768){l=728;c=l/w;O()}else if(y<480){l=300;c=l/w;O()}else if(y<768&&y>480){l=420;c=l/w;O()}}var e=new Array,t=new Array,n=new Array,r=new Array,i=new Array,s=new Array,o=new Array,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=0,x=0,T=null,N=5,C=$.browser.msie?!0:!1;E=Jacked.getMobile()==null?!1:!0;$.ajax({type:"GET",url:"xml/usaMapSettings.xml",dataType:$.browser.msie?"text":"xml",success:function(p){var b;if($.browser.msie){b=new ActiveXObject("Microsoft.XMLDOM");b.async=!1;b.loadXML(p)}else b=p;var S=$(b);u="#"+S.find("mapSettings").attr("offColor");a="#"+S.find("mapSettings").attr("strokeColor");f="#"+S.find("mapSettings").attr("abbreviationColor");l=S.find("mapSettings").attr("mapWidth");c=S.find("mapSettings").attr("mapHeight");d=S.find("mapSettings").attr("useSideText");v=S.find("mapSettings").attr("textAreaWidth");m=S.find("mapSettings").attr("textAreaPadding");w=l/c;h=l;if(d=="true"){$("#text").css({width:parseFloat(v)-parseFloat(m*2)+"px",height:parseFloat(c)-parseFloat(m*2)+"px",display:"inline","float":"right",padding:m+"px"});$("#text").html(S.find("defaultSideText").text())}else $("#text").remove();S.find("stateData").each(function(u){var a=$(this);o.push(a.text());e.push(a.attr("stateName"));t.push(a.attr("url"));n.push(a.attr("stateMode"));r.push("#"+a.attr("initialStateColor"));i.push("#"+a.attr("stateOverColor"));s.push("#"+a.attr("stateSelectedColor"))});g=$(window);y=g.width();y>=768&&(E=!1);if(!E)L();else{$("#map").remove();k()}}});document.captureEvents&&Event.MOUSEMOVE&&document.captureEvents(Event.MOUSEMOVE);document.body.onmousemove=A;$(window).resize(function(){M()})});